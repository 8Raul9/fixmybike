<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FixMyBike — Massive Repair Library (40+ Tutorials)</title>
  <meta name="description" content="Comprehensive bike repair library with 40 in-depth tutorials: flat tires, brakes, chains, electrics, suspension, diagnostics, and more."/>
  <style>
    :root{
      --primary:#2d89ef;
      --accent:#ffb043;
      --bg:#f4f6fb;
      --card:#ffffff;
      --text:#222;
      --muted:#6b7280;
      --glass: rgba(255,255,255,0.6);
      --radius:12px;
    }
    [data-theme="dark"]{
      --primary:#4a9eff;
      --accent:#ffb86b;
      --bg:#0f1724;
      --card:#0b1220;
      --text:#e6eef8;
      --muted:#9aa7bf;
      --glass: rgba(255,255,255,0.03);
    }

    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      font-family: Inter, "Segoe UI", Arial, sans-serif;
      background:var(--bg);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.5;
      transition:background .25s,color .25s;
    }

    /* Header / Topbar */
    header.site-header{
      background: linear-gradient(135deg,var(--primary), #1b5cbf);
      color:white;
      padding:32px 16px;
      text-align:center;
      position:sticky;
      top:0;
      z-index:30;
      box-shadow: 0 6px 18px rgba(0,0,0,.12);
    }
    header.site-header h1{margin:0;font-size:28px;letter-spacing:.2px}
    header.site-header p{margin:8px 0 0;opacity:.95}

    .top-controls{
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:center;
      margin-top:12px;
      flex-wrap:wrap;
    }

    /* Nav mini */
    nav.mini-nav{
      background:var(--card);
      margin:12px auto;
      width:min(1200px,94%);
      border-radius:10px;
      padding:10px;
      display:flex;
      gap:8px;
      align-items:center;
      justify-content:space-between;
      box-shadow: 0 6px 18px rgba(0,0,0,0.06);
    }
    .nav-left{display:flex;gap:8px;align-items:center}
    .logo{
      display:flex;gap:8px;align-items:center;
      font-weight:700;color:var(--primary)
    }
    .logo .dot{width:12px;height:12px;border-radius:50%;background:var(--accent);display:inline-block}

    .controls{display:flex;gap:8px;align-items:center}
    .search {
      border:1px solid rgba(0,0,0,0.06);
      padding:8px 12px;border-radius:10px;
      width:360px;
      background:var(--glass);
    }
    .search input{
      border:0;outline:0;background:transparent;width:100%;
      color:var(--text);
      font-size:14px;
    }
    button.btn{
      background:var(--primary);
      color:white;border:0;padding:9px 12px;border-radius:10px;
      cursor:pointer;font-weight:600;
      box-shadow:0 6px 12px rgba(45,137,239,0.18);
    }
    button.ghost{
      background:transparent;border:1px solid rgba(0,0,0,.06);padding:8px 10px;border-radius:10px;cursor:pointer;
    }

    /* Container */
    .main {
      width: min(1200px, 96%);
      margin: 28px auto;
      display: grid;
      grid-template-columns: 300px 1fr;
      gap: 20px;
      align-items:start;
    }

    /* Sidebar TOC */
    aside.toc{
      position:sticky;
      top:110px;
      align-self:start;
      background:var(--card);
      padding:16px;border-radius:var(--radius);
      box-shadow: 0 8px 20px rgba(0,0,0,0.06);
      max-height: calc(100vh - 140px);
      overflow:auto;
    }
    aside.toc h3{margin:0 0 10px 0;color:var(--primary)}
    aside.toc a {display:block;padding:8px;border-radius:8px;text-decoration:none;color:var(--text);margin:6px 0;}
    aside.toc a:hover{background:rgba(0,0,0,0.04)}

    /* Content area */
    section.library{
      min-height:60vh;
    }
    .library-header{
      display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap;
      margin-bottom:14px;
    }
    .library-header .meta{color:var(--muted);font-size:13px}
    .action-row{display:flex;gap:8px;align-items:center}

    /* Guide card / accordion */
    .guide-card{
      margin-bottom:16px;
      border-radius:12px;
      overflow:hidden;
      background:var(--card);
      box-shadow: 0 6px 18px rgba(2,6,23,0.06);
      border:1px solid rgba(0,0,0,0.04);
      transition: transform .16s, box-shadow .16s;
    }
    .guide-card:hover{ transform: translateY(-6px); box-shadow:0 12px 30px rgba(2,6,23,0.09); }
    .guide-head{
      display:flex;align-items:center;gap:12px;padding:14px 16px;cursor:pointer;
      background: linear-gradient(90deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02));
    }
    .guide-head h4{margin:0;font-size:16px}
    .guide-head .tag{margin-left:auto;color:var(--muted);font-size:13px}
    .guide-body{
      padding:0 16px;
      max-height:0;overflow:hidden;transition:max-height .45s cubic-bezier(.2,.9,.35,1),padding .25s;
    }
    .guide-body.open{ padding:16px; max-height:1200px; }

    .guide-body p{margin:0 0 10px 0}
    .guide-body ol{margin:0 0 12px 20px}
    .guide-img{width:100%;border-radius:8px;margin-top:8px;display:block}

    /* small helpers */
    .kbd{background:rgba(0,0,0,0.06);padding:6px 8px;border-radius:6px;font-weight:600}
    .muted{color:var(--muted)}
    .row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}

    /* footer */
    footer.site-footer{
      margin:28px auto 60px;
      width:min(1200px,96%);
      text-align:center;color:var(--muted);
    }

    /* Back to top */
    #backToTop{
      position:fixed;right:20px;bottom:20px;padding:12px 14px;border-radius:10px;background:var(--primary);color:white;border:0;cursor:pointer;box-shadow:0 10px 30px rgba(0,0,0,0.18);
      z-index:50;
    }

    /* responsive */
    @media (max-width:1000px){
      .main{grid-template-columns:1fr; padding:0 8px}
      aside.toc{position:relative;top:auto;max-height:none;margin-bottom:12px}
      .search{width:220px}
    }
  </style>
</head>
<body>
  <header class="site-header">
    <div style="max-width:1200px;margin:0 auto">
      <h1>FixMyBike — Massive Bike Repair Library</h1>
      <p>40 practical tutorials — step-by-step fixes, diagnostics, maintenance & upgrades.</p>
      <div class="top-controls">
        <div class="muted">Tip: folosește <span class="kbd">Search</span> pentru a găsi rapid un tutorial.</div>
      </div>
    </div>
  </header>

  <div class="mini-wrap" style="display:flex;justify-content:center;margin-top:16px">
    <div class="mini" style="width:min(1200px,96%)">
      <div class="mini-nav">
        <div class="nav-left">
          <div class="logo"><span class="dot"></span> FixMyBike</div>
        </div>
        <div class="controls">
          <div class="search">
            <input id="searchInput" placeholder="Search tutorials, e.g. 'chain', 'flat', 'suspension'..." aria-label="Search tutorials">
          </div>
          <button class="btn" id="expandAllBtn">Expand All</button>
          <button class="ghost" id="collapseAllBtn">Collapse All</button>
          <button class="ghost" id="copyLinkBtn" title="Copy link to clipboard">Copy page link</button>
        </div>
      </div>
    </div>
  </div>

  <main class="main">
    <aside class="toc" aria-label="Table of contents">
      <h3>Contents (40)</h3>
      <!-- Links will be injected by JS for reliability -->
      <nav id="tocList"></nav>
    </aside>

    <section class="library" id="library">
      <div class="library-header">
        <div>
          <h2 style="margin:0">Complete Repair Manual — 40 Tutorials</h2>
          <div class="meta muted">Covers flats, brakes, drivetrain, wheels, electrics, safety checks, upgrades & diagnostics.</div>
        </div>
        <div class="action-row">
          <div class="muted">Theme:</div>
          <button class="ghost" id="themeToggle">Toggle Dark</button>
          <div style="width:12px"></div>
          <div class="muted">Results: <span id="resultCount">40</span></div>
        </div>
      </div>

      <!-- 40 guides -->
      <!-- For brevity in the editor we include full content for each tutorial. Each card has id guideX -->
      <!-- Guide 1 -->
      <article class="guide-card" id="guide1">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>1 — Fix a Flat Tire (Tubed)</h4>
          <div class="tag muted">Tools: Tire levers, spare tube, pump, patch kit</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <p>Step-by-step for standard clincher tube flat:</p>
          <ol>
            <li>Remove wheel; for rear wheel shift to smallest cog first.</li>
            <li>Use two tire levers to unseat bead and remove one side of the tire.</li>
            <li>Remove the tube and inspect tire + rim strip for thorns/glass.</li>
            <li>Poke the hole, patch or fit a new tube; inflate slightly to seat the tube and check alignment.</li>
            <li>Mount tire fully, inflate to recommended PSI and re-fit wheel; spin to test.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1595888049652-121d6e0a99d4?w=1200&q=60" alt="Fixing a flat tire">
        </div>
      </article>

      <!-- Guide 2 -->
      <article class="guide-card" id="guide2">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>2 — Patch a Tubeless Tire</h4>
          <div class="tag muted">Tools: Sealant, plug kit, CO₂ or pump</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <p>Quick tubeless repair:</p>
          <ol>
            <li>Locate the puncture; remove object if still present.</li>
            <li>Insert a tubeless plug with the T-tool and pull tight.</li>
            <li>Add a small amount of sealant via valve if needed and re-inflate.</li>
            <li>Spin and check for leaks; ride slowly to allow sealant to settle.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1611320847806-d84c3526c9a8?w=1200&q=60" alt="Tubeless repair">
        </div>
      </article>

      <!-- Guide 3 -->
      <article class="guide-card" id="guide3">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>3 — Replace Inner Tube (Valve Types)</h4>
          <div class="tag muted">Notes: Presta vs Schrader</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <p>Valve-specific tips:</p>
          <ol>
            <li>For Presta, unscrew the small lock-nut; for Schrader, remove cap and use adapter if pump requires.</li>
            <li>Ensure the valve base sits straight in the rim hole to prevent leaks.</li>
            <li>Partially inflate to check seating, then fully inflate to correct PSI.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1600628429031-061e1c0f07e0?w=1200&q=60" alt="Inner tube replacement">
        </div>
      </article>

      <!-- Guide 4 -->
      <article class="guide-card" id="guide4">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>4 — True a Wheel (Basic)</h4>
          <div class="tag muted">Tools: Spoke wrench, truing stand optional</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <p>How to remove a small wobble:</p>
          <ol>
            <li>Identify high/low spots by spinning wheel; mark with a pen or use brake pad as indicator.</li>
            <li>Tighten spokes on the low side and loosen on the high; use small turns (1/4 turn).</li>
            <li>Recheck frequently — small increments avoid over-correction.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1594007654729-407eedc4f90f?w=1200&q=60" alt="Truing a wheel">
        </div>
      </article>

      <!-- Guide 5 -->
      <article class="guide-card" id="guide5">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>5 — Replace Brake Pads (Rim Brakes)</h4>
          <div class="tag muted">Tools: Allen keys</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Loosen pad retaining bolt; remove old pads and clean caliper area.</li>
            <li>Install new pads aligning with rim braking surface (toe-in slightly).</li>
            <li>Tighten and test; bed in new pads by short hard stops.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1606443362617-658e32c7b18f?w=1200&q=60" alt="Replacing brake pads">
        </div>
      </article>

      <!-- Guide 6 -->
      <article class="guide-card" id="guide6">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>6 — Replace Disc Brake Pads (Hydraulic)</h4>
          <div class="tag muted">Caution: Keep fluid clean</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Remove wheel and retaining pin; extract old pads carefully.</li>
            <li>Push piston back gently (use plastic tyre lever) to make room for new pads.</li>
            <li>Install new pads, secure pin; check rotor alignment and bed-in pads.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1606443362618-715eae7c8f1b?w=1200&q=60" alt="Hydraulic brake pads">
        </div>
      </article>

      <!-- Guide 7 -->
      <article class="guide-card" id="guide7">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>7 — Bleed Hydraulic Brakes</h4>
          <div class="tag muted">Tools: Bleed kit, correct fluid (DOT/Minera)</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <p>Bleeding requires the correct fluid & kit; steps vary by brand. General outline:</p>
          <ol>
            <li>Attach bleed cup at lever; open caliper bleed nipple.</li>
            <li>Push fluid from lever to caliper, avoiding air pockets.</li>
            <li>Close bleed ports, top up, and test lever firmness before riding.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1568667256549-0943d56c0f2a?w=1200&q=60" alt="Bleeding brakes">
        </div>
      </article>

      <!-- Guide 8 -->
      <article class="guide-card" id="guide8">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>8 — Adjust Cable Brakes</h4>
          <div class="tag muted">Tools: Pliers, allen key</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Release cable anchor, set pad spacing and pull cable tight.</li>
            <li>Use barrel adjuster for fine tensioning while testing lever feel.</li>
            <li>Trim excess cable and cap to finish.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1529421301871-1ca3f3cdb5b1?w=1200&q=60" alt="Cable brakes">
        </div>
      </article>

      <!-- Guide 9 -->
      <article class="guide-card" id="guide9">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>9 — Tune Derailleur Indexing (Rear)</h4>
          <div class="tag muted">Tools: Screwdriver</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Set high/low limit screws so chain does not overshift off cogs.</li>
            <li>Use barrel adjuster to fine-tune shifting between gears.</li>
            <li>Test under light pedaling and adjust until smooth.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1601742100487-62057aa90c14?w=1200&q=60" alt="Derailleur tuning">
        </div>
      </article>

      <!-- Guide 10 -->
      <article class="guide-card" id="guide10">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>10 — Replace Cassette / Freewheel</h4>
          <div class="tag muted">Tools: Lockring tool, chain whip</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Remove rear wheel, insert chain whip on cassette and use lockring tool to remove ring.</li>
            <li>Slide cassette off splines; clean hub and install new cassette ensuring fit.</li>
            <li>Tighten lockring to torque spec and refit wheel.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1545239351-1141bd82e8a6?w=1200&q=60" alt="Replacing cassette">
        </div>
      </article>

      <!-- Guide 11 -->
      <article class="guide-card" id="guide11">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>11 — Replace Chain (with Chain Tool)</h4>
          <div class="tag muted">Tools: Chain tool, master link pliers</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Measure chain length against old chain or big chainring + cog method.</li>
            <li>Use chain tool to press pin out; join with master link or new pin.</li>
            <li>Lubricate and test shifting under load.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1590768226836-24624f146848?w=1200&q=60" alt="Replacing chain">
        </div>
      </article>

      <!-- Guide 12 -->
      <article class="guide-card" id="guide12">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>12 — Bottom Bracket Replacement (Cartridge)</h4>
          <div class="tag muted">Tools: BB tool, crank puller</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Remove crank arms with crank puller, then use BB tool to unscrew old cartridge.</li>
            <li>Grease threads and install new BB per orientation (drive side, non-drive side).</li>
            <li>Refit cranks with correct torque and check for play.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=1200&q=60" alt="Bottom bracket">
        </div>
      </article>

      <!-- Guide 13 -->
      <article class="guide-card" id="guide13">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>13 — Replace Pedals (Thread Direction)</h4>
          <div class="tag muted">Notes: Right = clockwise, Left = counterclockwise to tighten</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Remember left pedal is reverse-threaded; apply grease to threads before installing.</li>
            <li>Tighten securely but avoid over-torquing; check regularly.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1560743641-3914f2c45636?w=1200&q=60" alt="Replacing pedals">
        </div>
      </article>

      <!-- Guide 14 -->
      <article class="guide-card" id="guide14">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>14 — Headset Adjustment / Preload</h4>
          <div class="tag muted">Tools: Allen keys</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Loosen stem bolts, tighten top cap until play is removed but steering remains smooth.</li>
            <li>Retighten stem bolts and recheck; do small adjustments and test.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1568667256549-0943d56c0f2a?w=1200&q=60" alt="Headset adjustment">
        </div>
      </article>

      <!-- Guide 15 -->
      <article class="guide-card" id="guide15">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>15 — Saddle Replacement & Fit</h4>
          <div class="tag muted">Tools: Allen keys, torque</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Loosen clamp, remove old saddle and fit new ensuring correct fore-aft and tilt.</li>
            <li>Make small adjustments and test ride; comfort is personal—fine tune over multiple rides.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1588354261765-8cf7f06d77d8?w=1200&q=60" alt="Saddle replacement">
        </div>
      </article>

      <!-- Guide 16 -->
      <article class="guide-card" id="guide16">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>16 — Handlebar Grips & Tape Replacement</h4>
          <div class="tag muted">Tools: Alcohol, compression</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Remove old grips/tape; clean bars with alcohol and allow to dry.</li>
            <li>Wrap tape tightly with slight overlap; secure ends with finishing tape.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1556609790-8f1bb963f3b8?w=1200&q=60" alt="Handlebar tape">
        </div>
      </article>

      <!-- Guide 17 -->
      <article class="guide-card" id="guide17">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>17 — Suspension Setup (Basic)</h4>
          <div class="tag muted">Tools: Shock pump</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Set sag: measure sag at rider weight (approx 20-30% travel for forks).</li>
            <li>Adjust rebound and compression per terrain; small increments and test ride.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1612379237840-2428bb3b8f6d?w=1200&q=60" alt="Suspension setup">
        </div>
      </article>

      <!-- Guide 18 -->
      <article class="guide-card" id="guide18">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>18 — Tune Shifting Noise (Chain Rub)</h4>
          <div class="tag muted">Diagnosis & fix</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Identify whether noise occurs on a specific cog; adjust limit screws and B-tension if needed.</li>
            <li>Check hanger alignment and replace if bent.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1602868531991-27c8d3be5b9d?w=1200&q=60" alt="Chain noise">
        </div>
      </article>

      <!-- Guide 19 -->
      <article class="guide-card" id="guide19">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>19 — Replace Wheel Hub Bearings (Loose Cup & Cone)</h4>
          <div class="tag muted">Tools: Cone spanner, grease</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Remove axle, cups and cones; clean and inspect for pitting.</li>
            <li>Regrease and reassemble, setting the correct preload to avoid play.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1595888049652-121d6e0a99d4?w=1200&q=60" alt="Hub bearings">
        </div>
      </article>

      <!-- Guide 20 -->
      <article class="guide-card" id="guide20">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>20 — Replace Headset Bearings (Integrated)</h4>
          <div class="tag muted">Tools: Headset press, crown race setter</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Remove fork, press out old bearings using a press or soft hammer and block.</li>
            <li>Clean cups, grease bearings lightly and press new bearings squarely into cups.</li>
            <li>Reassemble and set preload correctly.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1568667256549-0943d56c0f2a?w=1200&q=60" alt="Headset bearings">
        </div>
      </article>

      <!-- Guide 21 -->
      <article class="guide-card" id="guide21">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>21 — Diagnose Squeaky Noises</h4>
          <div class="tag muted">Methodical troubleshooting</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Isolate sound by spinning components while stationary (wheels, cranks, pedals).</li>
            <li>Lubricate moving parts (pedals, chain, pivots) and retest; tighten loose bolts.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1513002749550-c59d786b8e6c?w=1200&q=60" alt="Diagnose squeak">
        </div>
      </article>

      <!-- Guide 22 -->
      <article class="guide-card" id="guide22">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>22 — Install Fender / Rack</h4>
          <div class="tag muted">Tools: Allen keys, bracket bolts</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Secure mounting points (eyelets or seatpost clamps) and ensure clearance for tires.</li>
            <li>Tighten brackets evenly and check for rubbing while turning wheel.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1504215680853-026ed2a45def?w=1200&q=60" alt="Install fender">
        </div>
      </article>

      <!-- Guide 23 -->
      <article class="guide-card" id="guide23">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>23 — Replace Brake Rotors</h4>
          <div class="tag muted">Tools: T25 / hex</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Remove rotor bolts in a star pattern, clean new rotor with isopropyl alcohol before fitting.</li>
            <li>Tighten bolts to recommended torque and bed in the rotor with controlled braking.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1520975922113-43b9629b4c0c?w=1200&q=60" alt="Replace rotor">
        </div>
      </article>

      <!-- Guide 24 -->
      <article class="guide-card" id="guide24">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>24 — Replace Shifter Cable & Housing</h4>
          <div class="tag muted">Tools: Cable cutters, ferrules</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Remove old cable, feed new cable through shifter and housing ensuring smooth curves.</li>
            <li>Clamp and trim cable, fit endcap and adjust indexing with barrel adjuster.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1603360020136-e8cf9dfc8cf2?w=1200&q=60" alt="Shifter cable">
        </div>
      </article>

      <!-- Guide 25 -->
      <article class="guide-card" id="guide25">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>25 — Install New Crankset</h4>
          <div class="tag muted">Tools: Torque wrench, bottom bracket tools</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Remove old cranks; check bottom bracket condition and replace if worn.</li>
            <li>Fit new crankset per manufacturer torque settings and chainline specs.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1545239351-1141bd82e8a6?w=1200&q=60" alt="Install crankset">
        </div>
      </article>

      <!-- Guide 26 -->
      <article class="guide-card" id="guide26">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>26 — Replace Seatpost & Setback</h4>
          <div class="tag muted">Notes: Grease carbon vs. alloy</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Remove old seatpost, clean inside of frame; apply carbon paste for carbon posts or grease for alloy.</li>
            <li>Set height and clamp to recommended torque to prevent slippage.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1529421301871-1ca3f3cdb5b1?w=1200&q=60" alt="Seatpost">
        </div>
      </article>

      <!-- Guide 27 -->
      <article class="guide-card" id="guide27">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>27 — Replace Chainring</h4>
          <div class="tag muted">Tools: Allen keys, torque</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Remove crank bolts; swap chainring ensuring correct tooth count and orientation.</li>
            <li>Torque bolts evenly and check chainline and shifting performance.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1518655048521-f130df041f66?w=1200&q=60" alt="Replace chainring">
        </div>
      </article>

      <!-- Guide 28 -->
      <article class="guide-card" id="guide28">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>28 — Wheelbuilding: Lacing Basics</h4>
          <div class="tag muted">Intro to spokes & patterns</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Understand 3-cross vs radial lacing and choose pattern based on hub and intended use.</li>
            <li>Lace spokes hand-tight, then true and tension evenly across the wheel.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1594007654729-407eedc4f90f?w=1200&q=60" alt="Wheelbuilding">
        </div>
      </article>

      <!-- Guide 29 -->
      <article class="guide-card" id="guide29">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>29 — Electronic Groupset Troubleshooting</h4>
          <div class="tag muted">Diag: battery, junction, firmware</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Check battery charge, ensure firmware is up-to-date, and check connectors for dirt/water.</li>
            <li>Reset junction boxes and reflash if manufacturer recommends.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=1200&q=60" alt="Electronic groupset">
        </div>
      </article>

      <!-- Guide 30 -->
      <article class="guide-card" id="guide30">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>30 — Install & Route Internal Cables</h4>
          <div class="tag muted">Requires patience & proper guides</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Use internal routing guides and fish tape; protect frame channels from damage.</li>
            <li>Double-check length before cutting and secure with proper ferrules.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1520975922113-43b9629b4c0c?w=1200&q=60" alt="Internal routing">
        </div>
      </article>

      <!-- Guide 31 -->
      <article class="guide-card" id="guide31">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>31 — Bikepacking Mounts & Bag Fit</h4>
          <div class="tag muted">Fit, balance, secure</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Position weight low and centered; test handling before long rides.</li>
            <li>Use straps and anti-slip pads to secure racks and bags.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1504215680853-026ed2a45def?w=1200&q=60" alt="Bikepacking">
        </div>
      </article>

      <!-- Guide 32 -->
      <article class="guide-card" id="guide32">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>32 — Replace Lights & Dynamo Systems</h4>
          <div class="tag muted">Electrical basics</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>For dynamo: ensure proper cable routing and polarity; for battery lights check connections & mounts.</li>
            <li>Test visibility and beam spread at night.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1520975922113-43b9629b4c0c?w=1200&q=60" alt="Bike lights">
        </div>
      </article>

      <!-- Guide 33 -->
      <article class="guide-card" id="guide33">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>33 — Quick Pre-Ride Safety Checklist</h4>
          <div class="tag muted">60-second routine</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Check tire pressure, brakes, quick releases, and lights.</li>
            <li>Listen for loose parts and verify saddle/stem tightness.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1623182876886-7e7b2b911a8a?w=1200&q=60" alt="Pre-ride check">
        </div>
      </article>

      <!-- Guide 34 -->
      <article class="guide-card" id="guide34">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>34 — Chain Care: Cleaning & Lube Routine</h4>
          <div class="tag muted">Interval maintenance</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Degrease chain monthly (or more often in wet conditions) and apply appropriate lube.</li>
            <li>Wipe excess lube and inspect for stretch using a chain checker.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1602868531991-27c8d3be5b9d?w=1200&q=60" alt="Chain care">
        </div>
      </article>

      <!-- Guide 35 -->
      <article class="guide-card" id="guide35">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>35 — Remove Rust & Protect Frame</h4>
          <div class="tag muted">Supplies: steel wool, rust remover</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Sand rusted areas, treat with rust remover, prime and paint small chips to prevent spread.</li>
            <li>Wax or protective spray for long-term corrosion resistance.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1627499478538-20fdd86a3f4e?w=1200&q=60" alt="Rust removal">
        </div>
      </article>

      <!-- Guide 36 -->
      <article class="guide-card" id="guide36">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>36 — Replace Reflectors & Safety Stickers</h4>
          <div class="tag muted">Visibility basics</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Place reflectors and stickers at eye-catching angles; ensure they are clean and secure.</li>
            <li>Test at night and replace faded reflectors as needed.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1504215680853-026ed2a45def?w=1200&q=60" alt="Reflectors">
        </div>
      </article>

      <!-- Guide 37 -->
      <article class="guide-card" id="guide37">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>37 — Diagnose Wheel Hubs (Noise & Play)</h4>
          <div class="tag muted">Check bearings & axle</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Spin wheel and listen for hiss/grind; check for lateral play by wiggling rim side-to-side.</li>
            <li>Service bearings or replace hub if pitting is evident.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1595888049652-121d6e0a99d4?w=1200&q=60" alt="Hub diagnosis">
        </div>
      </article>

      <!-- Guide 38 -->
      <article class="guide-card" id="guide38">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>38 — Check & Replace Brake Cables</h4>
          <div class="tag muted">Cable health</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Inspect for fraying and stiffness; replace if the cable does not run smoothly in housing.</li>
            <li>Use fresh housing cuts and ferrules to ensure smooth operation.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1513002749550-c59d786b8e6c?w=1200&q=60" alt="Brake cables">
        </div>
      </article>

      <!-- Guide 39 -->
      <article class="guide-card" id="guide39">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>39 — Install Clipless Pedals & Cleats</h4>
          <div class="tag muted">Setup for float & release tension</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Position cleats under ball of foot; use small trial adjustments for release tension and float.</li>
            <li>Practice clipping in/out in a safe area before riding in traffic.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1560743641-3914f2c45636?w=1200&q=60" alt="Clipless pedals">
        </div>
      </article>

      <!-- Guide 40 -->
      <article class="guide-card" id="guide40">
        <div class="guide-head" role="button" tabindex="0" aria-expanded="false">
          <h4>40 — Full Safety Inspection (Pre-Long Ride)</h4>
          <div class="tag muted">Checklist for confidence</div>
        </div>
        <div class="guide-body" aria-hidden="true">
          <ol>
            <li>Check tires, pressure, brakes, chain lubrication, lights, quick releases, and headset play.</li>
            <li>Carry essential tools, spare tube, pump, and ID; plan route and tell someone your plan.</li>
          </ol>
          <img class="guide-img" src="https://images.unsplash.com/photo-1623182876886-7e7b2b911a8a?w=1200&q=60" alt="Full safety check">
        </div>
      </article>

    </section>
  </main>

  <footer class="site-footer">
    <div>© 2025 FixMyBike — Built for riders by riders • Want more topics? Ask and I'll add them!</div>
  </footer>

  <button id="backToTop" title="Back to top">⬆</button>

  <script>
    // --- Helper: Build TOC from guide cards ---
    (function buildTOC(){
      const toc = document.getElementById('tocList');
      const guides = document.querySelectorAll('.guide-card');
      guides.forEach((g, idx) => {
        const id = g.id;
        const title = g.querySelector('.guide-head h4').innerText;
        const a = document.createElement('a');
        a.href = '#' + id;
        a.innerText = title;
        a.addEventListener('click', (e)=>{
          e.preventDefault();
          // open the card and scroll into view
          const body = g.querySelector('.guide-body');
          openCard(body);
          g.scrollIntoView({behavior:'smooth', block:'center'});
        });
        toc.appendChild(a);
      });
    })();

    // --- Accordion behavior (toggle open/close) ---
    function openCard(bodyEl){
      // Close others? No, allow multiple open. For a different behavior, adapt here.
      bodyEl.classList.add('open');
      bodyEl.previousElementSibling.setAttribute('aria-expanded','true');
      bodyEl.setAttribute('aria-hidden','false');
    }
    function closeCard(bodyEl){
      bodyEl.classList.remove('open');
      bodyEl.previousElementSibling.setAttribute('aria-expanded','false');
      bodyEl.setAttribute('aria-hidden','true');
    }

    document.querySelectorAll('.guide-head').forEach(head=>{
      head.addEventListener('click', ()=>{
        const body = head.nextElementSibling;
        body.classList.toggle('open');
        const expanded = head.getAttribute('aria-expanded') === 'true';
        head.setAttribute('aria-expanded', expanded ? 'false' : 'true');
        body.setAttribute('aria-hidden', expanded ? 'true' : 'false');
      });
      // keyboard accessibility
      head.addEventListener('keydown', (ev)=>{
        if(ev.key === 'Enter' || ev.key === ' '){
          ev.preventDefault();
          head.click();
        }
      });
    });

    // --- Expand / Collapse All ---
    const expandAllBtn = document.getElementById('expandAllBtn');
    const collapseAllBtn = document.getElementById('collapseAllBtn');
    expandAllBtn.addEventListener('click', ()=>{
      document.querySelectorAll('.guide-body').forEach(b => openCard(b));
      updateResultCount();
    });
    collapseAllBtn.addEventListener('click', ()=>{
      document.querySelectorAll('.guide-body').forEach(b => closeCard(b));
      updateResultCount();
    });

    // --- Search filter ---
    const searchInput = document.getElementById('searchInput');
    const resultCount = document.getElementById('resultCount');
    function updateResultCount(){ resultCount.innerText = document.querySelectorAll('.guide-card:visible, .guide-card').length; }
    // We'll use a tiny utility to mark visible; since :visible isn't standard, implement toggle via style display
    function filterGuides(q){
      const cards = document.querySelectorAll('.guide-card');
      const normalized = q.trim().toLowerCase();
      let visible = 0;
      cards.forEach(card=>{
        const text = card.innerText.toLowerCase();
        if(!normalized || text.indexOf(normalized) !== -1){
          card.style.display = '';
          visible++;
        } else {
          card.style.display = 'none';
        }
      });
      resultCount.innerText = visible;
    }
    searchInput.addEventListener('input', (e)=>{
      filterGuides(e.target.value);
    });

    // --- Back to Top ---
    const back = document.getElementById('backToTop');
    back.addEventListener('click', ()=> window.scrollTo({top:0,behavior:'smooth'}));
    window.addEventListener('scroll', ()=>{
      if(window.scrollY > 400) back.style.display = 'block';
      else back.style.display = 'none';
    });

    // --- Theme toggle & persistence ---
    const themeToggle = document.getElementById('themeToggle');
    const savedTheme = localStorage.getItem('fixmybike_theme');
    if(savedTheme === 'dark'){ document.documentElement.setAttribute('data-theme','dark'); themeToggle.innerText = 'Light theme'; }
    else { document.documentElement.removeAttribute('data-theme'); themeToggle.innerText = 'Dark theme'; }

    themeToggle.addEventListener('click', ()=>{
      const current = document.documentElement.getAttribute('data-theme');
      if(current === 'dark'){
        document.documentElement.removeAttribute('data-theme');
        localStorage.setItem('fixmybike_theme','light');
        themeToggle.innerText = 'Dark theme';
      } else {
        document.documentElement.setAttribute('data-theme','dark');
        localStorage.setItem('fixmybike_theme','dark');
        themeToggle.innerText = 'Light theme';
      }
    });

    // --- Copy page link ---
    document.getElementById('copyLinkBtn').addEventListener('click', async ()=>{
      try{
        await navigator.clipboard.writeText(location.href);
        alert('Link copied to clipboard!');
      }catch(e){
        prompt('Copy this link:', location.href);
      }
    });

    // --- Small UX: open first card on load ---
    window.addEventListener('load', ()=>{
      const first = document.querySelector('.guide-card .guide-body');
      if(first) openCard(first);
      // set initial result count
      const total = document.querySelectorAll('.guide-card').length;
      resultCount.innerText = total;
    });

    // --- Accessibility: allow focusing guide-heads ---
    document.querySelectorAll('.guide-head').forEach(h => h.setAttribute('tabindex','0'));
  </script>
</body>
</html>
